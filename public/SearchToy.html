<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SearchToy</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
          integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script language="javascript">
    $(document).ready(function(){
        $.ajax({
            url: '/rest/agecombo',
            type: 'get',
            success: function(data){
            console.log(data);
            var $select = $('.ageCombo');
                  $.each( data, function( index, value ) {
                    $select.append('<option value=' + value.value + '>' + value.text + '</option>');
                  });
            },
            error: function (xhr, ajaxOptions, thrownError) {
                var errorMsg = 'Ajax request failed: ' + xhr.responseText;
                $('#content').html(errorMsg);
            }
        });
        $.ajax({
            url: '/rest/gendercombo',
            type: 'get',
            success: function(data){
            console.log(data);
            var select = $('.genderCombo');
                  for(var i=0; i<data.length; i++){
                    $(select).append('<option value=' + data[i].value + '>' + data[i].text + '</option>');
                  }
            },
            error: function (xhr, ajaxOptions, thrownError) {
                var errorMsg = 'Ajax request failed: ' + xhr.responseText;
                $('#content').html(errorMsg);
            }
        });
    });
</script>
</head>
<body>

<h1>
    Search Toy
</h1>

<label for="ageCombo">Select Age:</label>
<select class="ageCombo"></select>

<label for="genderCombo">Select Gender:</label>
<select class="genderCombo"></select>

<input type="button" id="searchButton" value="Search">

<script language="JavaScript">
    $("#searchButton").click(function() {
    var criteria = {};
    criteria.searchAge = $('.ageCombo').val();
    criteria.searchGender = $('.genderCombo').val();
    console.log(criteria);
        $.ajax({
            url: '/rest/toy',
            type: 'post',
            contentType: 'application/json; charset=UTF-8',
            data: JSON.stringify(criteria),
            success: function(data){
                console.log(data);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                console.log(thrownError);
                var errorMsg = 'Ajax request failed: ' + xhr.responseText;
                $('#content').html(errorMsg);
            }
        });
    });
</script>

<p>
    X toy found
</p>
<div>
    <table border=1>
        <thead>
        <td>Toy ID</td>
        <td> Name</td>
        <td> Gender</td>
        <td> Age</td>
        <td> Availability</td>
        </thead>
        <tbody>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>